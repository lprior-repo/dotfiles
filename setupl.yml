---
# Why is this one file vs a role? I want this to be dead simple. 
- name: Setup Machine
  hosts: localhost
  become: yes
  tasks:
    - name: Install dependencies for Linuxbrew
      apt:
        name:
          - build-essential
          - curl
          - file
          - git
          - sudo
        state: present
        update_cache: yes

    - name: Check if Homebrew is already installed
      stat:
        path: /usr/local/bin/brew
      register: b

    - name: Install Homebrew
      script: install-homebrew.sh
      when: not b.stat.exists

    # Move this to role https://docs.ansible.com/ansible/latest/collections/community/general/homebrew_module.html#ansible-collections-community-general-homebrew-module-requirements
    - name: Install GCC with Homebrew
      shell: |
        brew install gcc
      args:
        creates: /home/linuxbrew/.linuxbrew/bin/gcc



